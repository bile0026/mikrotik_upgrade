---
# tasks for download upgrade job

- name: Check version
      community.routeros.command:
        commands:
          - /system package update check-for-updates

- name: Check if an update is needed
  community.routeros.command:
    commands:
      - "[:put ([/system package update check-for-updates])]"
  register: output

- name: Run upgrade if new version is available
  community.routeros.command:
    commands:
      - /system package update install
  when: output.stdout is search('available')
